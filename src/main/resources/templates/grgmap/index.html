<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>

<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<script type="text/javascript" th:inline="javascript">
</script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,900" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" />

<link rel="stylesheet" type="text/css" href="/css/grgmap/boot-adjust.css" th:href="@{/css/grgmap/boot-adjust.css}" />
<link rel="stylesheet" type="text/css" href="/css/grgmap.css" th:href="@{/css/grgmap.css}" />
<link rel="stylesheet" type="text/css" href="/css/searchbox.css" th:href="@{/css/searchbox.css}" />
<script type="text/javascript" src="/js/searchbox.js" th:src="@{/js/searchbox.js}"></script>
<script type="text/javascript" src="/js/grgmap.js" th:src="@{/js/grgmap.js}"></script>

<style>

body {
	padding-top: 50px;
	background: #CEA573 url('https://template-party.com/template/tp_biz50/tp_biz50_kraft_green/images/bg.jpg');
	font-family:'Lato', 'Noto Sans Japanese', '游ゴシック Medium', '游ゴシック体', 'Yu Gothic Medium', YuGothic, 'ヒラギノ角ゴ ProN', 'Hiragino Kaku Gothic ProN', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', 'MS PGothic', sans-serif;
}

#nav_steps {
	box-shadow:3px 3px 3px;
}

.section {
	border: solid 1px gray;
	border-radius: 10px;
//	box-shadow:3px 3px 3px;
	margin-top: 15px;
}

.section h3 {
//	margin: 10px 0px 10px 10px;
//	width: 500px;
	margin-left: auto;
	margin-right: auto;
	margin-bottom: 10px;
}

#section0 h1 {
	font-weight: bold;
	text-align: center;
	margin: 60px 30px 20px 30px;
	padding: 10px;
	box-shadow:5px 5px 10px;
	color: #010079;
	text-shadow: 0 0 5px white;
	border-left: solid 7px #010079;
	background: -webkit-repeating-linear-gradient(-45deg, #cce7ff, #cce7ff 3px,#e9f4ff 3px, #e9f4ff 7px);
	background: repeating-linear-gradient(-45deg, #cce7ff, #cce7ff 3px,#e9f4ff 3px, #e9f4ff 7px);
}

#section0 p {
	text-align: center;
	background-color: #FFFFFF;
	opacity: 0.7;
}


#section0 {
	background-size: cover;
	background-image: url(/images/cars.jpg);
	height: 450px;
}
#section1, #section2 {
	background-color: #FFFFFF;
}
#section3 {
	background-color: #FACC2E;
}
#section4 {
	background-color: #FACC2E;
	height: 600px;
}

.goto_area {
	text-align: center;
	margin: 5px 0px 10px 0px;
}

.goto-btn {
	display: inline-block;
	background: #f7f7f7;
	border: solid 4px #FFA000;
	border-radius: 5px;
	box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.7);
	color: #ff7c5c;
	text-decoration: none;
}
.goto-btn:hover {
//	background: #ffc25c;
//	color: #FFFFFF;
	background: #f7f7f7;
	color: #ff7c5c;
	text-decoration: none;
}
.goto-btn:active {
	background: #f7f7f7;
	color: #ff7c5c;
	text-decoration: none;
	box-shadow: inset 0 0 2px rgba(128, 128, 128, 0.1);
	transform: translateY(4px);
}
.goto-btn:focus {
	background: #f7f7f7;
	color: #ff7c5c;
	text-decoration: none;
}
.goto-btn .btnicon {
    display: inline-block;
	background: #FFA000;
	color: #FFFFFF;
	padding: 5px 0px;
}

.goto-btn .btntitle {
    display: inline-block;
	width: 430px;
}

#site_qr { 
	margin-top: 20px;
	text-align: center;
}

.maps {
	border: solid 1px gray;
}


#map_zm_mytool {
	margin-top: 5px;
}

#shp_color_group input[type="radio"] {
	display: none;
}

#shp_color_group label {
	background-color: #ffffff;
	border-top: solid 1px #999999;
	border-bottom: solid 1px #999999;
	border-right: solid 1px #999999;
	padding: 5px;
}

#shp_color_group > label:first-of-type {
  border-left: solid 1px #999999;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

#shp_color_group > label:last-of-type {
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

#shp_color_group input[type="radio"]:checked + label {
	background-color: #cccccc;
}

#shp_color_group .lbl_shp_black {
	color: #000000;
}
#shp_color_group .lbl_shp_blue {
	color: #0000ff;
}
#shp_color_group .lbl_shp_red {
	color: #ff0000;
}

#btn_delete_shape {
	color: #000000;
	background-color: #FFFFFF;
	padding: 4px 7px 5px 7px;
}

#btn_delete_shape:hover {
	color: #343434;
	background-color: #EBEBEB;
}

.application {
	background-color: #FFFFFF;
	margin-left: auto;
	margin-right: auto;
	margin-bottom: 10px;
	padding: 20px;
	-webkit-box-shadow: 0 10px 6px -6px #777;
	   -moz-box-shadow: 0 10px 6px -6px #777;
	        box-shadow: 0 10px 6px -6px #777;
}

.application table, 
.application th,
.application td {
	border: 1px solid #0c0c0c;
	text-align: center;
}

.application th,
.application td {
	padding: 10px;
}

.thumb {
	border: 1px dashed #bdbdbd;
	color: #a4a4a4;
	display: table-cell;
	vertical-align: middle;
}

.prefectures {
	margin-left: auto;
	margin-right: auto;
	margin-bottom: 10px;
	-webkit-box-shadow: 0 10px 6px -6px #777;
	   -moz-box-shadow: 0 10px 6px -6px #777;
	        box-shadow: 0 10px 6px -6px #777;
}

.prefectures table {
	background-color: #FFEAEA;
	border-collapse: separate;
	border-radius: 12px 12px 0px 0px;
	border: 1px solid #848484;
	font-size: 1.1em;
}

.prefectures th {
	background-color: #C6E2FF;
}

.prefectures th:first-child {
	border-radius: 12px 0 0 0;
}

.prefectures th:last-child {
	border-radius: 0 12px 0 0;
}

.prefectures th, 
.prefectures td { 
	border-bottom: 1px solid #848484;
	padding: 0.15em 0.5em;
}
.prefectures th + th,
.prefectures td + td {
	border-left: 1px solid #848484;
}

.prefectures tbody tr:last-child td {
	border-bottom: none;
}

.prefectures thead,
.prefectures tbody {
	display: block;
}

.prefectures tbody {
	overflow-x: hidden;
	overflow-y: scroll;
	height: 100px;
}

.maps {width: 310px; height: 310px;}
#pac-input {width: 120px;}
.goto-btn {width:310px;}
.goto-btn .btnicon {width: 38px; font-size: 1.0em;}
.goto-btn .btntitle {width: 264px;}
.section h3,
.application,
.prefectures,
.prefectures table {width: 310px;}
.thumb,
.thumb img {width: 113px; height: 113px; max-width: 113px; max-height: 113px; font-size: 1.0em;}
.prefectures th, 
.prefectures td {width: 103px;}

@media screen and (min-width: 375px){
	.maps {width: 365px; height: 365px;}
	#pac-input {width: 175px;}
	.goto-btn {width: 365px; font-size: 1.2em;}
	.goto-btn .btnicon {width: 45px;}
	.goto-btn .btntitle {width: 312px;}
	.section h3,
	.application,
	.prefectures,
	.prefectures table {width: 365px;}
	.thumb,
	.thumb img {width: 140px; height: 140px; max-width: 140px; max-height: 140px; font-size: 1.2em;}
	.prefectures th, 
	.prefectures td {width: 121px;}
}
@media screen and (min-width: 414px){
	.maps {width: 404px; height: 404px;}
	#pac-input {width: 215px;}
	.goto-btn {width: 404px; font-size: 1.4em;}
	.goto-btn .btnicon {width: 50px;}
	.goto-btn .btntitle {width: 346px;}
	.section h3,
	.application,
	.prefectures,
	.prefectures table {width: 404px;}
	.thumb,
	.thumb img {width: 160px; height: 160px; max-width: 160px; max-height: 160px; font-size: 1.4em;}
	.prefectures th, 
	.prefectures td {width: 134px;}
}
@media screen and (min-width: 510px){
	.maps {width: 500px; height: 500px;}
	#pac-input {width: 300px;}
	.goto-btn {width: 500px; font-size: 1.8em;}
	.goto-btn .btnicon {width: 62px;}
	.goto-btn .btntitle {width: 430px;}
	.section h3,
	.application,
	.prefectures,
	.prefectures table {width: 500px;}
	.thumb,
	.thumb img {width: 208px; height: 208px; max-width: 208px; max-height: 208px; font-size: 1.8em;}
	.prefectures th, 
	.prefectures td {width: 166px;}
}

#adsframe {
	margin-left: 15px;
}

</style>

<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/

// {{{ $(function(){
$(function(){

	// menu
	$('a[href*="#"].anchor-link').on('click', function() {
		var speed = 400;
		var href= $(this).attr("href");
		var target = $(href == "#" || href == "" ? 'html' : href);
		var position = target.offset().top - $("#nav_steps").height() - 10;
		$('body,html').animate({scrollTop:position}, speed, 'swing');
		return false;
	});

});
// }}}


/*]]>*/
</script>

</head>
<body>

<nav id="nav_steps" class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">

<ul class="anchor-nav nav navbar-nav">
	<li><a href="#section0" class="anchor-link">Home</a></li>
	<li><a href="#section1" class="anchor-link">Step 1</a></li>
	<li><a href="#section2" class="anchor-link">Step 2</a></li>
	<li><a href="#section3" class="anchor-link">Step 3</a></li>
</ul>

		</div>
	</div>
</nav>

<div class="container-fluid">
	<div class="row row--nopadding">
		<div class="col-sm-9">

<div class="section" id="section0">
	<h1>Garage Map Creator</h1>
	<p>車庫証明の手続きに必要な<br />保管場所の所在図・配置図の作成をサポートします</p>
	<div class="goto_area"><a id="goto_step1" href="#section1" class="anchor-link goto-btn"><span class="btnicon"><i class="far fa-hand-pointer"></i></span><span class="btntitle">さぁ Step 1 から始めよう</span></a></div>
	<div id="site_qr"><img th:src="@{http://chart.apis.google.com/chart(chs=150x150,cht=qr,chl=${#httpServletRequest.requestURL})}" /></div>
</div>

<div class="section" id="section1">
	<h3>Step 1: 所在図を作ろう</h3>
	<div id="map_ov" class="maps center-block"></div>
	<input id="pac-input" class="controls" type="text" placeholder="Search Box" />
	<div class="goto_area"><a id="goto_step2" href="#section2" class="anchor-link goto-btn"><span class="btnicon"><i class="far fa-hand-pointer"></i></span><span class="btntitle">地図を申請書に差込み Step 2 へ</span></a></div>
</div>

<div class="section" id="section2">
	<h3>Step 2: 配置図を作ろう</h3>
	<div id="map_zm_mytool">
		<span id="shp_color_group">
			<input type="radio" name="shp_color" value="black" id="shp_black" checked="checked"><label for="shp_black" class="lbl_shp_black"><i class="fas fa-paint-brush"></i></label></input><input type="radio" name="shp_color" value="bule" id="shp_blue"><label for="shp_blue" class="lbl_shp_blue"><i class="fas fa-paint-brush"></i></label></input><input type="radio" name="shp_color" value="red" id="shp_red"><label for="shp_red" class="lbl_shp_red"><i class="fas fa-paint-brush"></i></label></input>
		</span>
		<span><button id="btn_delete_shape"><i class="fas fa-eraser"></i></button></span>
	</div>
	<div id="map_zm" class="maps center-block"></div>
	<div class="goto_area"><a id="goto_step3" href="#section3" class="anchor-link goto-btn"><span class="btnicon"><i class="far fa-hand-pointer"></i></span><span class="btntitle">地図を申請書に差込み Step 3 へ</span></a></div>
</div>

<div class="section" id="section3">
	<h3>Step 3: 申請書を作ろう</h3>
	<div>
		<form action="/grgmap/pdfeditor" method="post" enctype="multipart/form-data" target="pdfeditor" name="postappform">
		<div class="application">
			<table>
				<thead>
				<tr><th>所在図記載欄</th><th>配置図記載欄</th></tr>
				</thead>
				<tbody>
				<tr>
					<td><div id="thumb_map_ov" class="thumb">Step 1 から<br />ここに<br />地図を差込む</div><div><a href="#section1" class="anchor-link">Step 1 に戻る</a></div></td>
					<td><div id="thumb_map_zm" class="thumb">Step 2 から<br />ここに<br />地図を差込む</div><div><a href="#section2" class="anchor-link">Step 2 に戻る</a></div></td></tr>
				</tbody>
			</table>
		</div>
		<div><input type="hidden" id="img_map_ov" name="img_map_ov" value="" /></div>
		<div><input type="hidden" id="img_map_zm" name="img_map_zm" value="" /></div>
		<div class="prefectures">
			<p>作成する都道府県の申請書を選ぶ</p>
			<table>
				<thead>
					<tr><th>都道府県</th><th>説明ページ</th><th>PDF原本</th></tr>
				</thead>
				<tbody>
					<tr th:each="entry : ${appforms}">
						<td><input type="radio" name="pref" th:id="'pref_' + ${entry.value.pref}" th:value="${entry.value.code}" th:disabled="${entry.value.pdfUrl} ? null : '1'" /><label th:for="'pref_' + ${entry.value.pref}" th:text="${entry.value.pref}"></label></td>
						<td><a th:if="${entry.value.distUrl != null}" th:href="${entry.value.distUrl}" th:text="${entry.value.pref} + '警'" target="_blank"></a><span th:if="${entry.value.distUrl == null}">なし</span></td>
						<td><a th:if="${entry.value.pdfUrl != null}" th:href="${entry.value.pdfUrl}" target="_blank"><img src="/images/grgmap/pdf-on.png" /></a><span th:if="${entry.value.pdfUrl == null}">なし</span></td></tr>

				</tbody>
			</table>
		</div>
		</form>
	</div>
	<div class="goto_area"><a id="goto_step4" href="#section4" class="anchor-link goto-btn"><span class="btnicon"><i class="far fa-hand-pointer"></i></span><span class="btntitle">申請書を PDF で出力</span></a></div>
</div>

<div class="section" id="section4">
	<h3>Finish: お疲れさまでした！</h3>
	<div>
		<p>Goal!!</p>
	</div>
</div>


		</div>
		<div class="col-sm-3 hidden-xs">
			<div id="adsframe">
<h3>advertisement</h3>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/

var ank_step2 = document.getElementById("goto_step2");
ank_step2.addEventListener("click" , function(event) {
	putin_mapimg('map_ov');
}, false);

var ank_step3 = document.getElementById("goto_step3");
ank_step3.addEventListener("click" , function(event) {
	unselectShape();
	putin_mapimg('map_zm');
}, false);

var ank_step4 = document.getElementById("goto_step4");
ank_step4.addEventListener("click" , function(event) {
	document.postappform.submit();
}, false);

var chk_shp_black = document.getElementById("shp_black");
chk_shp_black.addEventListener("change", function(event) {
	change_shape_color(event);
}, false);

var chk_shp_blue = document.getElementById("shp_blue");
chk_shp_blue.addEventListener("change", function(event) {
	change_shape_color(event);
}, false);

var chk_shp_red = document.getElementById("shp_red");
chk_shp_red.addEventListener("change", function(event) {
	change_shape_color(event);
}, false);

var btn_del_sh = document.getElementById("btn_delete_shape");
btn_del_sh.addEventListener("click" , function(event) {
	deleteShape();
}, false);

// {{{ function initMap()
function initMap()
{
	var lat = /*[[${lat}]]*/ 35.45481104743612;
	var lng = /*[[${lng}]]*/ 139.63120803716913;

	initMapFully(lat, lng);
}
// }}}

/*]]>*/
</script>
<script th:src="'https://maps.googleapis.com/maps/api/js?callback=initMap&amp;key=' + ${gmapApiKey} + '&amp;libraries=drawing,places,geometry&amp;v=3.30'"></script>

</body>
</html>
